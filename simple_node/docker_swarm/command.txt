#!/bin/sh

# Build the Docker image
docker build -t my-node-app .

# Initialize Docker Swarm (if not already initialized)
docker swarm init 2>/dev/null || true

# Create the Docker service
docker service create --name my-node-app --publish 8080:8080 my-node-app

# Scale the service
docker service scale my-node-app=3



# docker swarm all commands:

# Initialize Docker Swarm (if not already initialized)
docker swarm init

# Create a service
docker service create --name my-node-app --publish 8080:8080 my-node-app

# Scale the service to 3 replicas
docker service scale my-node-app=3

# List all services
docker service ls

# Inspect a specific service
docker service inspect my-node-app

# List tasks (containers) of a service
docker service ps my-node-app

# Update the service to use a new image
docker service update --image new-image:latest my-node-app

# Scale down the service to zero replicas (stop it)
docker service scale my-node-app=0

# Remove the service (stop and delete it)
docker service rm my-node-app



# very important commands

# docker stack deploy -c docker-compose.yml my-node-app
